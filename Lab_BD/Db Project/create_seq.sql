-- 1. ORASE
CREATE TABLE ORASE (
  nume_oras  VARCHAR2(100) PRIMARY KEY
);

-- 2. COORDONATORI
CREATE TABLE COORDONATORI (
  id_coordonator     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nume_coordonator   VARCHAR2(100) NOT NULL,
  cnp_coordonator    VARCHAR2(13)  NOT NULL UNIQUE,
  email_coordonator  VARCHAR2(100) NOT NULL,
  telefon_coordonator VARCHAR2(20) NOT NULL
);

-- 3. SCOLI
CREATE TABLE SCOLI (
  id_scoala      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  id_coordonator NUMBER NOT NULL
    REFERENCES COORDONATORI(id_coordonator),
  nume_oras      VARCHAR2(100) NOT NULL
    REFERENCES ORASE(nume_oras),
  nume_scoala    VARCHAR2(200) NOT NULL,
  adresa         VARCHAR2(255) NOT NULL
);

-- 4. PROFESORI
CREATE TABLE PROFESORI (
  id_profesor     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  cnp_profesor    VARCHAR2(13)  NOT NULL UNIQUE,
  email_profesor  VARCHAR2(100) NOT NULL,
  telefon_profesor VARCHAR2(20) NOT NULL,
  nume_profesor   VARCHAR2(100) NOT NULL
);

-- 5. LIMBAJE
CREATE TABLE LIMBAJE (
  nume_limbaj     VARCHAR2(50) PRIMARY KEY
);

-- 6. CURSURI
CREATE TABLE CURSURI (
  nume_curs       VARCHAR2(100) PRIMARY KEY,
  limbaj_curs     VARCHAR2(50)  NOT NULL
    REFERENCES LIMBAJE(nume_limbaj),
  descriere_curs  VARCHAR2(4000),
  nivel_curs      VARCHAR2(20)  DEFAULT 'Începător',
  durata_curs     NUMBER        NOT NULL
);

-- 7. GRUPE
CREATE TABLE GRUPE (
  id_grupa        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  id_profesor     NUMBER NOT NULL
    REFERENCES PROFESORI(id_profesor),
  id_scoala       NUMBER NOT NULL
    REFERENCES SCOLI(id_scoala),
  curs            VARCHAR2(100) NOT NULL
    REFERENCES CURSURI(nume_curs),
  categorie       VARCHAR2(20)  NOT NULL,
  zi_grupa        VARCHAR2(10)  NOT NULL,
  ora_inceput     DATE          NOT NULL,
  ora_sfarsit     DATE          NOT NULL,
  capacitate      NUMBER        NOT NULL
);

-- 8. ELEVI
CREATE TABLE ELEVI (
  id_elev       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  id_scoala     NUMBER NOT NULL
    REFERENCES SCOLI(id_scoala),
  id_grupa      NUMBER NOT NULL
    REFERENCES GRUPE(id_grupa),
  nume_elev     VARCHAR2(100) NOT NULL,
  cnp_elev      VARCHAR2(13)  NOT NULL UNIQUE,
  telefon_elev  VARCHAR2(20),
  email_elev    VARCHAR2(100)
);
-- 9. SCOLI_PROFESOR (asociere M:N)
CREATE TABLE SCOLI_PROFESORI (
  id_scoala     NUMBER NOT NULL
    REFERENCES SCOLI(id_scoala),
  id_profesor   NUMBER NOT NULL
    REFERENCES PROFESORI(id_profesor),
  PRIMARY KEY (id_scoala, id_profesor)
);

-- 10. PROFESORI_LIMBAJE (asociere M:N)
CREATE TABLE PROFESORI_LIMBAJE (
  id_profesor   NUMBER NOT NULL
    REFERENCES PROFESORI(id_profesor),
  nume_limbaj   VARCHAR2(50) NOT NULL
    REFERENCES LIMBAJE(nume_limbaj),
  PRIMARY KEY (id_profesor, nume_limbaj)
);

-- 11. ELEVI_CURSURI (asociere M:N)
CREATE TABLE ELEVI_CURSURI (
  id_elev       NUMBER NOT NULL
    REFERENCES ELEVI(id_elev),
  nume_curs     VARCHAR2(100) NOT NULL
    REFERENCES CURSURI(nume_curs),
  PRIMARY KEY (id_elev, nume_curs)
);


DROP TABLE COORDONATORI;
DROP TABLE CURSURI;
DROP TABLE ELEVI CASCADE CONSTRAINTS ;
PURGE TABLE ELEVI;
DROP TABLE ELEVI_CURSURI;
DROP TABLE  GRUPE ;
DROP TABLE LIMBAJE;
DROP TABLE ORASE;
DROP TABLE PROFESORI;
DROP TABLE PROFESORI_LIMBAJE;
DROP TABLE SCOLI;
DROP TABLE SCOLI_PROFESORI;